{% extends "base.html" %}

{% block title %}Your Profile - SunDevil Circle{% endblock %}

{% block content %}
<div class="container" style="padding-top: 180px; padding-bottom: 80px; max-width: 700px;">

    <div class="card">
        <h1 style="font-size: 28px; font-weight: 700; margin-bottom: 8px; color: var(--primary-maroon);">Complete Your
            Profile</h1>
        <p style="color: var(--text-secondary); margin-bottom: 32px;">Help us match you with the right peers and
            resources.</p>

        <form method="POST" action="{{ url_for('profile') }}">
            <div class="form-group">
                <label class="form-label" for="display_name">Display Name</label>
                <input type="text" id="display_name" name="display_name" class="form-input"
                    placeholder="Choose a display name (can be anonymous)" required
                    value="{{ profile.display_name if profile else '' }}">
                <p style="font-size: 12px; color: var(--text-light); margin-top: 4px;">This is how others will see you.
                    You can use any name you'd like.</p>
            </div>

            <div class="form-group">
                <label class="form-label">Are you an international freshman?</label>
                <div style="display: flex; gap: 16px; margin-top: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="is_international_freshman" value="yes" {{ 'checked' if profile and
                            profile.is_international_freshman else '' }}>
                        <span>Yes</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="radio" name="is_international_freshman" value="no" {{ 'checked' if profile and not
                            profile.is_international_freshman else '' }}>
                        <span>No</span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="preferred_language">Preferred Language</label>
                <select id="preferred_language" name="preferred_language" class="form-input">
                    <option value="">Select a language...</option>
                    <option value="English" {{ 'selected' if profile and profile.preferred_language=='English' else ''
                        }}>English</option>
                    <option value="Spanish" {{ 'selected' if profile and profile.preferred_language=='Spanish' else ''
                        }}>Spanish</option>
                    <option value="Mandarin" {{ 'selected' if profile and profile.preferred_language=='Mandarin' else ''
                        }}>Mandarin Chinese</option>
                    <option value="Hindi" {{ 'selected' if profile and profile.preferred_language=='Hindi' else '' }}>
                        Hindi</option>
                    <option value="Arabic" {{ 'selected' if profile and profile.preferred_language=='Arabic' else '' }}>
                        Arabic</option>
                    <option value="Portuguese" {{ 'selected' if profile and profile.preferred_language=='Portuguese'
                        else '' }}>Portuguese</option>
                    <option value="French" {{ 'selected' if profile and profile.preferred_language=='French' else '' }}>
                        French</option>
                    <option value="Korean" {{ 'selected' if profile and profile.preferred_language=='Korean' else '' }}>
                        Korean</option>
                    <option value="Japanese" {{ 'selected' if profile and profile.preferred_language=='Japanese' else ''
                        }}>Japanese</option>
                    <option value="Vietnamese" {{ 'selected' if profile and profile.preferred_language=='Vietnamese'
                        else '' }}>Vietnamese</option>
                    <option value="Other" {{ 'selected' if profile and profile.preferred_language=='Other' else '' }}>
                        Other</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">What challenges are you facing? (Select all that apply)</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 8px;">
                    {% set challenges = ['homesickness', 'academic', 'social', 'cultural', 'language', 'financial',
                    'health', 'career'] %}
                    {% set challenge_labels = {
                    'homesickness': 'üè† Homesickness',
                    'academic': 'üìö Academic Pressure',
                    'social': 'üë• Making Friends',
                    'cultural': 'üåç Cultural Adjustment',
                    'language': 'üí¨ Language Barriers',
                    'financial': 'üí∞ Financial Stress',
                    'health': '‚ù§Ô∏è Health & Wellness',
                    'career': 'üíº Career & Internships'
                    } %}
                    {% for challenge in challenges %}
                    <label
                        style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 12px; background: #FAFAFA; border-radius: 8px; transition: all 200ms;">
                        <input type="checkbox" name="primary_challenge" value="{{ challenge }}" {{ 'checked' if profile
                            and challenge in profile.primary_challenge else '' }}>
                        <span>{{ challenge_labels[challenge] }}</span>
                    </label>
                    {% endfor %}
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Support Style Preference</label>
                <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                    <label
                        style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 16px; background: #FAFAFA; border-radius: 8px;">
                        <input type="radio" name="support_style" value="listening" {{ 'checked' if profile and
                            profile.support_style=='listening' else '' }}>
                        <div>
                            <strong>Listener</strong>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-top: 2px;">I prefer to
                                listen and receive support</p>
                        </div>
                    </label>
                    <label
                        style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 16px; background: #FAFAFA; border-radius: 8px;">
                        <input type="radio" name="support_style" value="sharing" {{ 'checked' if profile and
                            profile.support_style=='sharing' else '' }}>
                        <div>
                            <strong>Sharer</strong>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-top: 2px;">I prefer to share
                                my experiences with others</p>
                        </div>
                    </label>
                    <label
                        style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 16px; background: #FAFAFA; border-radius: 8px;">
                        <input type="radio" name="support_style" value="mixed" {{ 'checked' if (not profile) or (profile
                            and profile.support_style=='mixed' ) else '' }}>
                        <div>
                            <strong>Both</strong>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-top: 2px;">I'm open to both
                                listening and sharing</p>
                        </div>
                    </label>
                </div>
            </div>

            <button type="submit" class="btn btn-maroon"
                style="width: 100%; padding: 16px; font-size: 18px; margin-top: 16px;">
                Save & Continue
            </button>
        </form>
    </div>
</div>
{% endblock %}