{% extends "base.html" %}

{% block title %}Share Your Challenge - SunDevil Circle{% endblock %}

{% block content %}
<div class="container" style="padding-top: 180px; padding-bottom: 80px; max-width: 700px;">

    <div class="card">
        <div style="text-align: center; margin-bottom: 32px;">
            <span style="font-size: 48px;">ğŸ’¬</span>
            <h1 style="font-size: 28px; font-weight: 700; margin-top: 16px; color: var(--text-primary);">What's on your
                mind?</h1>
            <p style="color: var(--text-secondary); margin-top: 8px;">Share what you're going through. Our AI will
                provide personalized support and match you with peers who understand.</p>
        </div>

        <form method="POST" action="{{ url_for('issue') }}">
            <div class="form-group">
                <label class="form-label" for="issue_text">Describe your challenge</label>
                <textarea id="issue_text" name="issue_text" class="form-input" rows="6"
                    placeholder="Example: I've been feeling really homesick lately. I miss my family and friends back home, and I'm finding it hard to make new friends here..."
                    required>{{ issue_text if issue_text else '' }}</textarea>
                <p style="font-size: 12px; color: var(--text-light); margin-top: 8px;">
                    ğŸ”’ Your response is private and only used to personalize your support. It won't be shared with
                    others.
                </p>
            </div>

            <button type="submit" class="btn btn-maroon" style="width: 100%; padding: 16px; font-size: 18px;">
                Get Support
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="margin-left: 8px;">
                    <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
            </button>
        </form>

        <div class="transparency-note" style="margin-top: 24px;">
            <strong>ğŸ¤– How AI Helps You:</strong>
            Our AI analyzes your input to provide personalized suggestions and resources. It also monitors for signs of
            distress to ensure you get the support you need.
        </div>
    </div>

    <!-- Quick Topic Suggestions -->
    <div class="card mt-6">
        <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">Not sure what to write? Common topics:</h3>
        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
            <button type="button" onclick="setTopicText('homesick')" class="group-tag-btn">ğŸ  Feeling Homesick</button>
            <button type="button" onclick="setTopicText('academic')" class="group-tag-btn">ğŸ“š Academic Stress</button>
            <button type="button" onclick="setTopicText('friends')" class="group-tag-btn">ğŸ‘¥ Making Friends</button>
            <button type="button" onclick="setTopicText('culture')" class="group-tag-btn">ğŸŒ Cultural
                Adjustment</button>
            <button type="button" onclick="setTopicText('language')" class="group-tag-btn">ğŸ’¬ Language Barriers</button>
            <button type="button" onclick="setTopicText('lonely')" class="group-tag-btn">ğŸ’™ Feeling Lonely</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const topicTexts = {
        'homesick': "I've been feeling really homesick lately. I miss my family and friends back home, and adjusting to life here has been harder than I expected.",
        'academic': "I'm struggling with the academic pressure here. The coursework is challenging, and I'm worried about my grades and keeping up with the pace.",
        'friends': "I'm finding it difficult to make new friends. Everyone seems to already have their own groups, and I feel like an outsider.",
        'culture': "I'm having a hard time adjusting to the culture here. Things are so different from back home, and sometimes I feel like I don't fit in.",
        'language': "English isn't my first language, and I sometimes struggle to express myself or understand others. It's making social situations stressful.",
        'lonely': "I've been feeling really lonely and isolated. Even when I'm around people, I feel like no one really understands what I'm going through."
    };

    function setTopicText(topic) {
        document.getElementById('issue_text').value = topicTexts[topic] || '';
        document.getElementById('issue_text').focus();
    }
</script>
{% endblock %}