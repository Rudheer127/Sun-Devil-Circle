<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="{% block meta_description %}SunDevil Circles - Peer support for ASU students{% endblock %}">
    <title>{% block title %}SunDevil Circles{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% block head %}{% endblock %}
</head>

<body>
    <!-- Crisis Alert Banner -->
    <div class="crisis-banner" id="crisisBanner">
        <div class="crisis-banner-content" onclick="toggleCrisisPanel()">
            <svg class="crisis-banner-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            </svg>
            <div class="crisis-banner-text">
                <strong>Need immediate support?</strong>
                <span>Tap to see crisis resources available 24/7</span>
            </div>
        </div>
        <svg class="crisis-banner-close" onclick="closeCrisisBanner(event)" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12" />
        </svg>
    </div>

    <!-- Crisis Resources Panel - EXPANDED with all 7 resources -->
    <div class="crisis-panel" id="crisisPanel">
        <div class="crisis-panel-header">
            <h3 style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">Crisis
                Resources</h3>
            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                SunDevil Circles is not an emergency service. For urgent safety or life-threatening situations, use the
                resources below.
            </p>
        </div>
        <div class="crisis-grid expanded">
            <!-- 911 Emergency -->
            <div class="crisis-card emergency">
                <div class="crisis-card-header">
                    <span class="crisis-icon-emoji">ðŸš¨</span>
                    <span class="crisis-tag emergency">Emergency</span>
                </div>
                <h4 class="crisis-card-title">911 Emergency</h4>
                <p class="crisis-card-desc">Immediate danger, medical emergency, or someone is at risk right now. 24/7.
                </p>
                <a href="tel:911" class="crisis-card-action btn-emergency">Call 911 â†’</a>
            </div>

            <!-- 988 Suicide & Crisis Lifeline -->
            <div class="crisis-card pink">
                <div class="crisis-card-header">
                    <svg class="crisis-card-icon" viewBox="0 0 24 24" fill="none" stroke="#E11D48" stroke-width="2">
                        <path
                            d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z" />
                    </svg>
                </div>
                <h4 class="crisis-card-title">988 Suicide & Crisis Lifeline</h4>
                <p class="crisis-card-desc">Free, confidential support for mental health/substance-use crises. 24/7/365.
                </p>
                <div class="crisis-actions">
                    <a href="tel:988" class="crisis-card-action">Call 988</a>
                    <a href="sms:988" class="crisis-card-action">Text 988</a>
                    <a href="https://988lifeline.org/chat" target="_blank" rel="noopener"
                        class="crisis-card-action">Chat â†’</a>
                </div>
            </div>

            <!-- ASU/EMPACT Crisis Line -->
            <div class="crisis-card green">
                <div class="crisis-card-header">
                    <svg class="crisis-card-icon" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                        <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                    </svg>
                </div>
                <h4 class="crisis-card-title">ASU/EMPACT 24-Hour Crisis Line</h4>
                <p class="crisis-card-desc">ASU-dedicated urgent behavioral/mental health crisis support. 24/7.</p>
                <a href="tel:+14809211006" class="crisis-card-action">Call (480) 921-1006 â†’</a>
            </div>

            <!-- ASU TELUS Health -->
            <div class="crisis-card gold">
                <div class="crisis-card-header">
                    <svg class="crisis-card-icon" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <path d="M12 6v6l4 2" />
                    </svg>
                </div>
                <h4 class="crisis-card-title">ASU Open Call & Chat (TELUS Health)</h4>
                <p class="crisis-card-desc">ASU student counseling support by phone/chat. 24/7/365, anywhere in the
                    world.</p>
                <div class="crisis-actions">
                    <a href="tel:+18772587429" class="crisis-card-action">Call 1-877-258-7429</a>
                    <a href="https://www.asu.edu/counseling-services/services/open-call-open-chat" target="_blank"
                        rel="noopener" class="crisis-card-action">Chat â†’</a>
                </div>
            </div>

            <!-- Crisis Text Line -->
            <div class="crisis-card pink">
                <div class="crisis-card-header">
                    <svg class="crisis-card-icon" viewBox="0 0 24 24" fill="none" stroke="#E11D48" stroke-width="2">
                        <path
                            d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z" />
                    </svg>
                </div>
                <h4 class="crisis-card-title">Crisis Text Line</h4>
                <p class="crisis-card-desc">Free, confidential crisis support via text. 24/7.</p>
                <a href="sms:741741?body=HOME" class="crisis-card-action">Text HOME to 741741 â†’</a>
            </div>

            <!-- ASU Counseling Services -->
            <div class="crisis-card green">
                <div class="crisis-card-header">
                    <svg class="crisis-card-icon" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                    </svg>
                </div>
                <h4 class="crisis-card-title">ASU Counseling Services</h4>
                <p class="crisis-card-desc">Free mental health support for all ASU students.</p>
                <a href="tel:4809656146" class="crisis-card-action">Call (480) 965-6146 â†’</a>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar">
        <div class="navbar-container"
            style="display: flex; align-items: center; justify-content: space-between; width: 100%; max-width: 1400px; margin: 0 auto; padding: 0 24px;">
            <a href="{{ url_for('index') }}" class="logo">
                <div class="logo-icon">â˜€</div>
                <div class="logo-text">
                    <span class="sun">SunDevil</span><span class="circle">Circles</span>
                </div>
            </a>

            <div class="nav-links" style="display: flex; gap: 32px; flex: 1; justify-content: center;">
                {% if session.get('user_id') %}
                <a href="{{ url_for('issue') }}" style="white-space: nowrap;">Get Support</a>
                <a href="{{ url_for('resources_hub') }}" style="white-space: nowrap;">Browse Resources</a>
                <a href="{{ url_for('groups_page') }}" style="white-space: nowrap;">Find Groups</a>
                <a href="{{ url_for('my_groups_page') }}" style="white-space: nowrap;">My Groups</a>
                <a href="{{ url_for('people') }}" style="white-space: nowrap;">Find Peers</a>
                <a href="{{ url_for('peers_page') }}" style="white-space: nowrap;">My Peers</a>
                {% else %}
                <a href="{{ url_for('index') }}#how-it-works">How It Works</a>
                <a href="{{ url_for('index') }}#safety">Safety</a>
                <a href="{{ url_for('index') }}#resources">Resources</a>
                {% endif %}
            </div>

            <div class="nav-actions" style="display: flex; gap: 8px; align-items: center;">
                {% if session.get('user_id') %}
                <a href="{{ url_for('profile') }}" class="btn-signin">Profile</a>
                <a href="{{ url_for('logout') }}" class="btn-signin">Log Out</a>
                <a href="{{ url_for('decision') }}" class="btn-primary">Dashboard</a>
                {% else %}
                <a href="{{ url_for('login') }}" class="btn-signin">Sign In</a>
                <a href="{{ url_for('signup') }}" class="btn-primary">Get Started</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Crisis Banner & Panel JavaScript -->
    <script>
        let crisisPanelOpen = false;

        function toggleCrisisPanel() {
            const panel = document.getElementById('crisisPanel');
            crisisPanelOpen = !crisisPanelOpen;
            if (crisisPanelOpen) {
                panel.classList.add('active');
            } else {
                panel.classList.remove('active');
            }
        }

        function closeCrisisBanner(event) {
            event.stopPropagation();
            const banner = document.getElementById('crisisBanner');
            const panel = document.getElementById('crisisPanel');
            const navbar = document.getElementById('navbar');

            banner.classList.add('hidden');
            panel.classList.remove('active');
            navbar.classList.add('no-banner');

            // Store preference
            sessionStorage.setItem('crisisBannerClosed', 'true');
        }

        // Check if banner was previously closed
        document.addEventListener('DOMContentLoaded', function () {
            if (sessionStorage.getItem('crisisBannerClosed') === 'true') {
                document.getElementById('crisisBanner').classList.add('hidden');
                document.getElementById('navbar').classList.add('no-banner');
            }
        });
    </script>

    {% block scripts %}{% endblock %}
</body>

</html>